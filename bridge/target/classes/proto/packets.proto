syntax = "proto3";

package org.pytenix.proto;

option java_package = "org.pytenix.proto.generated";
option java_outer_classname = "NetworkPackets";


message ServerConfiguration {
  string license_key = 1;
  map<string, bool> modules = 2;
  repeated string words = 3;
}


message TranslationRequest {
  bytes request_id = 1;
  string text = 2;
  string target_lang = 3;
  string module = 4;
}

message ConfigRequestPacket {
  int64 timestamp = 1;
}


message TranslationBatch {
  string origin_server = 1;
  repeated TranslationRequest requests = 2;


  repeated string results = 3;
}


message Chunk {
  string transmission_id = 1;
  int32 part_index = 2;
  int32 total_parts = 3;
  bytes data = 4;
}


message PacketWrapper {
  oneof payload {
    TranslationBatch batch = 1;
    Chunk chunk = 2;
    ServerConfiguration config = 3;
    ConfigRequestPacket config_request = 4;
  }
}